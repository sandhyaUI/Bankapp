var tap = require('tap');
var tape = require('../');

tap.test('tape only test', function (tt) {
    var test = tape.createHarness({ exit: false });
    var tc = tap.createConsumer();

    var rows = []
    tc.on('data', function (r) { rows.push(r) })
    tc.on('end', function () {
        var rs = rows.map(function (r) {
            if (r && typeof r === 'object') {
                return { id: r.id, ok: r.ok, name: r.name.trim() };
            }
            else {
                return r;
            }
 